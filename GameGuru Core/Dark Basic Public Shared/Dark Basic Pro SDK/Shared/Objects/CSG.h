
#ifndef _CSG_H_
#define _CSG_H_

//////////////////////////////////////////////////////////////////////////////////////
// NOTES /////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////
/*
	CSG commands
*/

//////////////////////////////////////////////////////////////////////////////////////
// COMMON INCLUDES ///////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////
#include ".\..\DBOFormat\DBOFormat.h"

//////////////////////////////////////////////////////////////////////////////////////
// DEFINES ///////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////
#ifndef SAFE_DELETE
# define SAFE_DELETE( p )       { if ( p ) { delete ( p );       ( p ) = NULL; } }
#endif
#ifndef SAFE_RELEASE
# define SAFE_RELEASE( p )      { if ( p ) { ( p )->Release ( ); ( p ) = NULL; } }
#endif
#ifndef SAFE_DELETE_ARRAY
# define SAFE_DELETE_ARRAY( p ) { if ( p ) { delete [ ] ( p );   ( p ) = NULL; } }
#endif
#ifndef SAFE_MEMORY
# define SAFE_MEMORY( p )       { if ( p == NULL ) return false; }
#endif
#ifndef MAX_STRING
# define MAX_STRING				256
#endif

//////////////////////////////////////////////////////////////////////////////////////
// CLASS DEFINITION //////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////

class cCompiler;

class cCSG
{
	public:
		struct sVertex
		{
			// used to store vertex information

			float x, y, z;			// position
			float nx, ny, nz;		// normals
			float tu, tv;			// texture coordinates
		};

		void BuildVertexAndIndexList ( cCompiler* pA, cCompiler* pB, sMesh* pMesh );

		int ClockWise ( sVertex *p, int n);
		
	public:
		cCSG  ( );
		~cCSG ( );

		bool Union			( sMesh* pMeshA, GGMATRIX matA, sMesh* pMeshB, GGMATRIX matB );
		bool Difference		( sMesh* pMeshA, GGMATRIX matA, sMesh* pMeshB, GGMATRIX matB );
		bool Intersection	( sMesh* pMeshA, GGMATRIX matA, sMesh* pMeshB, GGMATRIX matB );
		bool Clip			( sMesh* pMeshA, GGMATRIX matA, sMesh* pMeshB, GGMATRIX matB );
};

#endif _CSG_H_
